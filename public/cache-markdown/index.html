<!DOCTYPE html>
<html lang="en">
<head>
	
		<title>GopherBOOk: Render Markdown and Cache Handler</title>
	
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
	<meta name="description" content="This example will show how to send Markdown contents and use the Cache handler to cache the handler&#39;s response for your page using the Go programming language." />
	<link rel="alternate" type="application/rss+xml" href="/index.xml" />
	<link rel="canonical" href="http://gopherbook.iris-go.com/cache-markdown/">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
	<meta name="theme-color" content="#bb8844">
	<style>
		body {
			margin: 0;
			font-family: -apple-system, "San Francisco", "Helvetica Neue", "Noto",  "Roboto", "Calibri Light", sans-serif;
			color: #212121;
			font-size: 1.1em;
			line-height: 1.6;
		}
		.container { max-width: 700px; margin: auto; padding: 15px; }
		a {	color: black; }
		p { font-family: "Georgia", serif; margin: 0.5em 0; }
		h1 { margin: 1em 0; }
		h1 a { text-decoration: none; }
		h2 { font-size: 1.2em; margin: 0.5em 0; }
		pre { padding: 15px; overflow-x: auto; background: #fafafa; border: 1px solid #f0f0f0; }
		.demo pre { background-color: white; border: none; margin: 1em 0 0 0; padding: 0; }
		a[target="_blank"] { background: url(/link.svg) right top/9px no-repeat; padding-right: 12px; }
		.links { display: flex; justify-content: space-between; }
		a.back { text-decoration: none; }
		a.home { text-decoration: none; }
		a.forward { text-decoration: none; }
		.footer { font-size: .9em; margin-top: 1em; color: #999; font-family: "Georgia", serif; }
		.footer a { color: #999; }
		.image { border: 1px solid #f0f0f0; }
		.image img { max-width: 100%; height: auto; display: block; }
		.demo { border: 1px solid #f0f0f0; padding: 15px; line-height: 1.4; pointer-events: none; }
		.demo h1 { margin: 0 0 0.5em 0; font-size: 1.5em; }
		.demo input[type=text], .demo textarea { box-sizing: border-box; width: 100%; max-width: 20em; }
	</style>
</head>
<body>
<div class="container">



<h1 id="go-web-examples-render-markdown-and-cache-handler"><a href="/">Go Web Examples:</a> Render Markdown and Cache Handler</h1>

<p>This example will show how to send Markdown contents and use the Cache handler to cache the handler&rsquo;s response.</p>

<pre><code>// file markdown-cache.go
package main

import (
    &quot;time&quot;

    &quot;gopkg.in/kataras/iris.v6&quot;
    &quot;gopkg.in/kataras/iris.v6/adaptors/httprouter&quot;
)

var testMarkdownContents = `## Hello Markdown

This is a sample of Markdown contents



Features
--------

All features of Sundown are supported, including:

*   **Compatibility**. The Markdown v1.0.3 test suite passes with
    the --tidy option.  Without --tidy, the differences are
    mostly in whitespace and entity escaping, where blackfriday is
    more consistent and cleaner.

*   **Common extensions**, including table support, fenced code
    blocks, autolinks, strikethroughs, non-strict emphasis, etc.

*   **Safety**. Blackfriday is paranoid when parsing, making it safe
    to feed untrusted user input without fear of bad things
    happening. The test suite stress tests this and there are no
    known inputs that make it crash.  If you find one, please let me
    know and send me the input that does it.

    NOTE: &quot;safety&quot; in this context means *runtime safety only*. In order to
    protect yourself against JavaScript injection in untrusted content, see
    [this example](https://github.com/russross/blackfriday#sanitize-untrusted-content).

*   **Fast processing**. It is fast enough to render on-demand in
    most web applications without having to cache the output.

*   **Thread safety**. You can run multiple parsers in different
    goroutines without ill effect. There is no dependence on global
    shared state.

*   **Minimal dependencies**. Blackfriday only depends on standard
    library packages in Go. The source code is pretty
    self-contained, so it is easy to add to any project, including
    Google App Engine projects.

*   **Standards compliant**. Output successfully validates using the
    W3C validation tool for HTML 4.01 and XHTML 1.0 Transitional.

    [this is a link](https://github.com/kataras/iris) `

func main() {
    app := iris.New()
    // output startup banner and error logs on os.Stdout
    app.Adapt(iris.DevLogger())
    // set the router, you can choose gorillamux too
    app.Adapt(httprouter.New())

    app.Get(&quot;/hi&quot;, app.Cache(func(c *iris.Context) {
        c.WriteString(&quot;Hi this is a big content, do not try cache on small content it will not make any significant difference!&quot;)
    }, time.Duration(10)*time.Second))

    bodyHandler := func(ctx *iris.Context) {
        ctx.Markdown(iris.StatusOK, testMarkdownContents)
    }

    expiration := time.Duration(5 * time.Second)

    app.Get(&quot;/&quot;, app.Cache(bodyHandler, expiration))

    // if expiration is &lt;=time.Second then the cache tries to set the expiration from the &quot;cache-control&quot; maxage header's value(in seconds)
    // // if this header doesn't founds then the default is 5 minutes
    app.Get(&quot;/cache_control&quot;, app.Cache(func(ctx *iris.Context) {
        ctx.HTML(iris.StatusOK, &quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;)
    }, -1))

    app.Listen(&quot;:8080&quot;)
}

</code></pre>

<pre><code>$ go run markdown-cache.go
</code></pre>

<h2>Hello Markdown</h2>

<p>This is a sample of Markdown contents</p>

<h2>Features</h2>

<p>All features of Sundown are supported, including:</p>

<ul>
<li><p><strong>Compatibility</strong>. The Markdown v1.0.3 test suite passes with
the &ndash;tidy option.  Without &ndash;tidy, the differences are
mostly in whitespace and entity escaping, where blackfriday is
more consistent and cleaner.</p></li>

<li><p><strong>Common extensions</strong>, including table support, fenced code
blocks, autolinks, strikethroughs, non-strict emphasis, etc.</p></li>

<li><p><strong>Safety</strong>. Blackfriday is paranoid when parsing, making it safe
to feed untrusted user input without fear of bad things
happening. The test suite stress tests this and there are no
known inputs that make it crash.  If you find one, please let me
know and send me the input that does it.</p>

<p>NOTE: &ldquo;safety&rdquo; in this context means <em>runtime safety only</em>. In order to
protect yourself against JavaScript injection in untrusted content, see
<a href="https://github.com/russross/blackfriday#sanitize-untrusted-content">this example</a>.</p></li>

<li><p><strong>Fast processing</strong>. It is fast enough to render on-demand in
most web applications without having to cache the output.</p></li>

<li><p><strong>Thread safety</strong>. You can run multiple parsers in different
goroutines without ill effect. There is no dependence on global
shared state.</p></li>

<li><p><strong>Minimal dependencies</strong>. Blackfriday only depends on standard
library packages in Go. The source code is pretty
self-contained, so it is easy to add to any project, including
Google App Engine projects.</p></li>

<li><p><strong>Standards compliant</strong>. Output successfully validates using the
W3C validation tool for HTML 4.01 and XHTML 1.0 Transitional.</p>

<p><a href="https://github.com/kataras/iris">this is a link</a></p></li>
</ul>

	<div class="footer">
		<div class="links">
		
			
			<a title="Websockets" class="back" href="http://gopherbook.iris-go.com/websockets/">← back</a>
			
			<a title="GopherBOOk" class="home" href="/">home</a>
			
			<a title="GopherBOOk" class="forward" href="http://gopherbook.iris-go.com/">forward →</a>
			
		
		</div>
		<br /><br />
		 <a href="https://github.com/kataras/iris">Iris web framework</a>
	</div>
</div>
</body>
</html>
